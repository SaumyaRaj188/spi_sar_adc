#! /usr/local/bin/vvp
:ivl_version "13.0 (devel)" "(s20250103-66-gd67d3323a)";
:ivl_delay_selection "TYPICAL";
:vpi_time_precision - 12;
:vpi_module "/usr/local/lib/ivl/system.vpi";
:vpi_module "/usr/local/lib/ivl/vhdl_sys.vpi";
:vpi_module "/usr/local/lib/ivl/vhdl_textio.vpi";
:vpi_module "/usr/local/lib/ivl/v2005_math.vpi";
:vpi_module "/usr/local/lib/ivl/va_math.vpi";
S_0x5bfab6327270 .scope module, "tb_spi_controller" "tb_spi_controller" 2 3;
 .timescale -9 -12;
P_0x5bfab6344220 .param/l "ADDR_CAL" 1 2 15, C4<11>;
P_0x5bfab6344260 .param/l "ADDR_CTRL" 1 2 12, C4<00>;
P_0x5bfab63442a0 .param/l "ADDR_DATA" 1 2 14, C4<10>;
P_0x5bfab63442e0 .param/l "ADDR_STATUS" 1 2 13, C4<01>;
P_0x5bfab6344320 .param/l "CLK_PERIOD" 1 2 6, +C4<00000000000000000000000000001010>;
P_0x5bfab6344360 .param/l "CMD_CLEAR" 1 2 11, C4<11>;
P_0x5bfab63443a0 .param/l "CMD_READ" 1 2 8, C4<00>;
P_0x5bfab63443e0 .param/l "CMD_SET" 1 2 10, C4<10>;
P_0x5bfab6344420 .param/l "CMD_WRITE" 1 2 9, C4<01>;
P_0x5bfab6344460 .param/l "SPI_CLK_PERIOD" 1 2 7, +C4<00000000000000000000000001100100>;
L_0x715947bb7018 .functor BUFT 1, C4<00000>, C4<0>, C4<0>, C4<0>;
v0x5bfab63957b0_0 .net/2u *"_ivl_0", 4 0, L_0x715947bb7018;  1 drivers
v0x5bfab63958b0_0 .var "adc_data_i", 11 0;
v0x5bfab6395970_0 .net "adc_en_o", 0 0, L_0x5bfab6396da0;  1 drivers
v0x5bfab6395a10_0 .net "auto_mode_o", 0 0, L_0x5bfab6396f30;  1 drivers
v0x5bfab6395ab0_0 .var "busy_i", 0 0;
v0x5bfab6395ba0_0 .var "cal_offset_i", 11 0;
v0x5bfab6395c70_0 .var "clk", 0 0;
v0x5bfab6395d40_0 .net "clk_sel_o", 0 0, L_0x5bfab6397240;  1 drivers
v0x5bfab6395e10_0 .net "ctrl_reg_bus", 11 0, L_0x5bfab6396870;  1 drivers
v0x5bfab6395eb0_0 .var "eoc_i", 0 0;
v0x5bfab6395f80_0 .net "int_en_o", 0 0, L_0x5bfab63970b0;  1 drivers
v0x5bfab6396050_0 .var "read_data", 11 0;
v0x5bfab63960f0_0 .var "reset_n", 0 0;
v0x5bfab63961c0_0 .var "spi_cs", 0 0;
v0x5bfab6396290_0 .net "spi_miso", 0 0, L_0x5bfab63a7560;  1 drivers
v0x5bfab6396360_0 .var "spi_mosi", 0 0;
v0x5bfab6396430_0 .var "spi_sclk", 0 0;
v0x5bfab6396500_0 .net "start_cal_o", 0 0, L_0x5bfab6397150;  1 drivers
v0x5bfab63965d0_0 .net "start_conv_o", 0 0, L_0x5bfab6396e40;  1 drivers
v0x5bfab63966a0_0 .var "vref_rdy_i", 0 0;
v0x5bfab6396770_0 .net "vref_sel_o", 0 0, L_0x5bfab6396fd0;  1 drivers
LS_0x5bfab6396870_0_0 .concat [ 1 1 1 1], L_0x5bfab6396da0, L_0x5bfab6396e40, L_0x5bfab6396f30, L_0x5bfab6396fd0;
LS_0x5bfab6396870_0_4 .concat [ 1 1 1 5], L_0x5bfab63970b0, L_0x5bfab6397150, L_0x5bfab6397240, L_0x715947bb7018;
L_0x5bfab6396870 .concat [ 4 8 0 0], LS_0x5bfab6396870_0_0, LS_0x5bfab6396870_0_4;
S_0x5bfab6326990 .scope module, "dut" "spi_controller" 2 37, 3 1 0, S_0x5bfab6327270;
 .timescale -9 -12;
    .port_info 0 /INPUT 1 "clk";
    .port_info 1 /INPUT 1 "reset_n";
    .port_info 2 /INPUT 1 "spi_sclk";
    .port_info 3 /INPUT 1 "spi_cs";
    .port_info 4 /INPUT 1 "spi_mosi";
    .port_info 5 /OUTPUT 1 "spi_miso";
    .port_info 6 /OUTPUT 1 "adc_en_o";
    .port_info 7 /OUTPUT 1 "start_conv_o";
    .port_info 8 /OUTPUT 1 "auto_mode_o";
    .port_info 9 /OUTPUT 1 "vref_sel_o";
    .port_info 10 /OUTPUT 1 "int_en_o";
    .port_info 11 /OUTPUT 1 "start_cal_o";
    .port_info 12 /OUTPUT 1 "clk_sel_o";
    .port_info 13 /INPUT 12 "adc_data_i";
    .port_info 14 /INPUT 12 "cal_offset_i";
    .port_info 15 /INPUT 1 "eoc_i";
    .port_info 16 /INPUT 1 "busy_i";
    .port_info 17 /INPUT 1 "vref_rdy_i";
P_0x5bfab63751e0 .param/l "ADDR_CAL" 1 3 44, C4<11>;
P_0x5bfab6375220 .param/l "ADDR_CTRL" 1 3 41, C4<00>;
P_0x5bfab6375260 .param/l "ADDR_DATA" 1 3 43, C4<10>;
P_0x5bfab63752a0 .param/l "ADDR_STATUS" 1 3 42, C4<01>;
P_0x5bfab63752e0 .param/l "CMD_CLEAR" 1 3 38, C4<11>;
P_0x5bfab6375320 .param/l "CMD_READ" 1 3 35, C4<00>;
P_0x5bfab6375360 .param/l "CMD_SET" 1 3 37, C4<10>;
P_0x5bfab63753a0 .param/l "CMD_WRITE" 1 3 36, C4<01>;
P_0x5bfab63753e0 .param/l "S_EXECUTE" 1 3 32, C4<10>;
P_0x5bfab6375420 .param/l "S_IDLE" 1 3 30, C4<00>;
P_0x5bfab6375460 .param/l "S_SHIFT" 1 3 31, C4<01>;
L_0x5bfab632ac80 .functor NOT 1, v0x5bfab6394350_0, C4<0>, C4<0>, C4<0>;
L_0x5bfab632c6c0 .functor AND 1, v0x5bfab6394290_0, L_0x5bfab632ac80, C4<1>, C4<1>;
v0x5bfab632ae90_0 .net *"_ivl_0", 0 0, L_0x5bfab632ac80;  1 drivers
v0x5bfab632c7d0_0 .net *"_ivl_22", 31 0, L_0x5bfab63972e0;  1 drivers
L_0x715947bb7060 .functor BUFT 1, C4<0000000000000000000000000000000>, C4<0>, C4<0>, C4<0>;
v0x5bfab632c870_0 .net *"_ivl_25", 30 0, L_0x715947bb7060;  1 drivers
L_0x715947bb70a8 .functor BUFT 1, C4<00000000000000000000000000000000>, C4<0>, C4<0>, C4<0>;
v0x5bfab632a3b0_0 .net/2u *"_ivl_26", 31 0, L_0x715947bb70a8;  1 drivers
v0x5bfab6347570_0 .net *"_ivl_28", 0 0, L_0x5bfab63a73f0;  1 drivers
o0x715947eb6108 .functor BUFZ 1, c4<z>; HiZ drive
; Elide local net with no drivers, v0x5bfab6325cc0_0 name=_ivl_30
v0x5bfab6393330_0 .net "adc_data_i", 11 0, v0x5bfab63958b0_0;  1 drivers
v0x5bfab6393410_0 .net "adc_en_o", 0 0, L_0x5bfab6396da0;  alias, 1 drivers
v0x5bfab63934d0_0 .net "auto_mode_o", 0 0, L_0x5bfab6396f30;  alias, 1 drivers
v0x5bfab6393590_0 .net "busy_i", 0 0, v0x5bfab6395ab0_0;  1 drivers
v0x5bfab6393650_0 .net "cal_offset_i", 11 0, v0x5bfab6395ba0_0;  1 drivers
v0x5bfab6393730_0 .var "cal_offset_reg", 11 0;
v0x5bfab6393810_0 .net "clk", 0 0, v0x5bfab6395c70_0;  1 drivers
v0x5bfab63938d0_0 .net "clk_sel_o", 0 0, L_0x5bfab6397240;  alias, 1 drivers
v0x5bfab6393990_0 .var "ctrl_reg", 11 0;
v0x5bfab6393a70_0 .var "data_reg", 11 0;
v0x5bfab6393b50_0 .net "decoded_addr", 1 0, L_0x5bfab6396cb0;  1 drivers
v0x5bfab6393c30_0 .net "decoded_cmd", 1 0, L_0x5bfab6396c10;  1 drivers
v0x5bfab6393d10_0 .net "eoc_i", 0 0, v0x5bfab6395eb0_0;  1 drivers
v0x5bfab6393dd0_0 .net "int_en_o", 0 0, L_0x5bfab63970b0;  alias, 1 drivers
v0x5bfab6393e90_0 .var "miso_out_reg", 0 0;
v0x5bfab6393f50_0 .var "miso_shift_reg", 15 0;
v0x5bfab6394030_0 .var "next_state", 1 0;
v0x5bfab6394110_0 .net "reset_n", 0 0, v0x5bfab63960f0_0;  1 drivers
v0x5bfab63941d0_0 .var "sclk_d1", 0 0;
v0x5bfab6394290_0 .var "sclk_d2", 0 0;
v0x5bfab6394350_0 .var "sclk_d3", 0 0;
v0x5bfab6394410_0 .net "sclk_posedge", 0 0, L_0x5bfab632c6c0;  1 drivers
v0x5bfab63944d0_0 .net "spi_cs", 0 0, v0x5bfab63961c0_0;  1 drivers
v0x5bfab6394590_0 .net "spi_miso", 0 0, L_0x5bfab63a7560;  alias, 1 drivers
v0x5bfab6394650_0 .net "spi_mosi", 0 0, v0x5bfab6396360_0;  1 drivers
v0x5bfab6394710_0 .net "spi_sclk", 0 0, v0x5bfab6396430_0;  1 drivers
v0x5bfab63947d0_0 .var "spi_shift_reg", 15 0;
v0x5bfab63948b0_0 .net "start_cal_o", 0 0, L_0x5bfab6397150;  alias, 1 drivers
v0x5bfab6394970_0 .net "start_conv_o", 0 0, L_0x5bfab6396e40;  alias, 1 drivers
v0x5bfab6394a30_0 .var "state_reg", 1 0;
v0x5bfab6394b10_0 .var "status_info_reg", 11 0;
v0x5bfab6394bf0_0 .net "vref_rdy_i", 0 0, v0x5bfab63966a0_0;  1 drivers
v0x5bfab6394cb0_0 .net "vref_sel_o", 0 0, L_0x5bfab6396fd0;  alias, 1 drivers
E_0x5bfab6345940 .event negedge, v0x5bfab6394110_0, v0x5bfab6394710_0;
E_0x5bfab63487f0/0 .event negedge, v0x5bfab6394110_0;
E_0x5bfab63487f0/1 .event posedge, v0x5bfab6393810_0;
E_0x5bfab63487f0 .event/or E_0x5bfab63487f0/0, E_0x5bfab63487f0/1;
E_0x5bfab6349370 .event anyedge, v0x5bfab6394a30_0, v0x5bfab63944d0_0;
L_0x5bfab6396c10 .part v0x5bfab63947d0_0, 14, 2;
L_0x5bfab6396cb0 .part v0x5bfab63947d0_0, 12, 2;
L_0x5bfab6396da0 .part v0x5bfab6393990_0, 0, 1;
L_0x5bfab6396e40 .part v0x5bfab6393990_0, 1, 1;
L_0x5bfab6396f30 .part v0x5bfab6393990_0, 2, 1;
L_0x5bfab6396fd0 .part v0x5bfab6393990_0, 3, 1;
L_0x5bfab63970b0 .part v0x5bfab6393990_0, 4, 1;
L_0x5bfab6397150 .part v0x5bfab6393990_0, 5, 1;
L_0x5bfab6397240 .part v0x5bfab6393990_0, 6, 1;
L_0x5bfab63972e0 .concat [ 1 31 0 0], v0x5bfab63961c0_0, L_0x715947bb7060;
L_0x5bfab63a73f0 .cmp/eq 32, L_0x5bfab63972e0, L_0x715947bb70a8;
L_0x5bfab63a7560 .functor MUXZ 1, o0x715947eb6108, v0x5bfab6393e90_0, L_0x5bfab63a73f0, C4<>;
S_0x5bfab6395050 .scope task, "spi_transaction" "spi_transaction" 2 76, 2 76 0, S_0x5bfab6327270;
 .timescale -9 -12;
v0x5bfab632ad90_0 .var "addr", 1 0;
v0x5bfab6395240_0 .var "cmd", 1 0;
v0x5bfab6395320_0 .var/i "i", 31 0;
v0x5bfab63953e0_0 .var "rx_frame", 15 0;
v0x5bfab63954c0_0 .var "rx_payload", 11 0;
v0x5bfab63955f0_0 .var "tx_frame", 15 0;
v0x5bfab63956d0_0 .var "tx_payload", 11 0;
TD_tb_spi_controller.spi_transaction ;
    %load/vec4 v0x5bfab6395240_0;
    %load/vec4 v0x5bfab632ad90_0;
    %concat/vec4; draw_concat_vec4
    %load/vec4 v0x5bfab63956d0_0;
    %concat/vec4; draw_concat_vec4
    %store/vec4 v0x5bfab63955f0_0, 0, 16;
    %pushi/vec4 0, 0, 1;
    %store/vec4 v0x5bfab63961c0_0, 0, 1;
    %pushi/vec4 0, 0, 32;
    %store/vec4 v0x5bfab6395320_0, 0, 32;
T_0.0 ; Top of for-loop
    %load/vec4 v0x5bfab6395320_0;
    %cmpi/s 16, 0, 32;
	  %jmp/0xz T_0.1, 5;
    %load/vec4 v0x5bfab63955f0_0;
    %pushi/vec4 15, 0, 32;
    %load/vec4 v0x5bfab6395320_0;
    %sub;
    %part/s 1;
    %store/vec4 v0x5bfab6396360_0, 0, 1;
    %delay 100000, 0;
    %load/vec4 v0x5bfab6396290_0;
    %pushi/vec4 15, 0, 32;
    %load/vec4 v0x5bfab6395320_0;
    %sub;
    %ix/vec4/s 4;
    %store/vec4 v0x5bfab63953e0_0, 4, 1;
T_0.2 ; for-loop step statement
    %load/vec4 v0x5bfab6395320_0;
    %addi 1, 0, 32;
    %store/vec4 v0x5bfab6395320_0, 0, 32;
    %jmp T_0.0;
T_0.1 ; for-loop exit label
    %pushi/vec4 1, 0, 1;
    %store/vec4 v0x5bfab63961c0_0, 0, 1;
    %load/vec4 v0x5bfab63953e0_0;
    %parti/s 12, 0, 2;
    %store/vec4 v0x5bfab63954c0_0, 0, 12;
    %delay 100000, 0;
    %end;
    .scope S_0x5bfab6326990;
T_1 ;
    %wait E_0x5bfab63487f0;
    %load/vec4 v0x5bfab6394110_0;
    %nor/r;
    %flag_set/vec4 8;
    %jmp/0xz  T_1.0, 8;
    %pushi/vec4 0, 0, 2;
    %assign/vec4 v0x5bfab6394a30_0, 0;
    %jmp T_1.1;
T_1.0 ;
    %load/vec4 v0x5bfab6394030_0;
    %assign/vec4 v0x5bfab6394a30_0, 0;
T_1.1 ;
    %jmp T_1;
    .thread T_1;
    .scope S_0x5bfab6326990;
T_2 ;
    %wait E_0x5bfab6349370;
    %load/vec4 v0x5bfab6394a30_0;
    %store/vec4 v0x5bfab6394030_0, 0, 2;
    %load/vec4 v0x5bfab6394a30_0;
    %dup/vec4;
    %pushi/vec4 0, 0, 2;
    %cmp/u;
    %jmp/1 T_2.0, 6;
    %dup/vec4;
    %pushi/vec4 1, 0, 2;
    %cmp/u;
    %jmp/1 T_2.1, 6;
    %dup/vec4;
    %pushi/vec4 2, 0, 2;
    %cmp/u;
    %jmp/1 T_2.2, 6;
    %jmp T_2.3;
T_2.0 ;
    %load/vec4 v0x5bfab63944d0_0;
    %pad/u 32;
    %cmpi/e 0, 0, 32;
    %jmp/0xz  T_2.4, 4;
    %pushi/vec4 1, 0, 2;
    %store/vec4 v0x5bfab6394030_0, 0, 2;
T_2.4 ;
    %jmp T_2.3;
T_2.1 ;
    %load/vec4 v0x5bfab63944d0_0;
    %pad/u 32;
    %cmpi/e 1, 0, 32;
    %jmp/0xz  T_2.6, 4;
    %pushi/vec4 2, 0, 2;
    %store/vec4 v0x5bfab6394030_0, 0, 2;
T_2.6 ;
    %jmp T_2.3;
T_2.2 ;
    %pushi/vec4 0, 0, 2;
    %store/vec4 v0x5bfab6394030_0, 0, 2;
    %jmp T_2.3;
T_2.3 ;
    %pop/vec4 1;
    %jmp T_2;
    .thread T_2, $push;
    .scope S_0x5bfab6326990;
T_3 ;
    %wait E_0x5bfab63487f0;
    %load/vec4 v0x5bfab6394110_0;
    %nor/r;
    %flag_set/vec4 8;
    %jmp/0xz  T_3.0, 8;
    %pushi/vec4 0, 0, 1;
    %assign/vec4 v0x5bfab63941d0_0, 0;
    %pushi/vec4 0, 0, 1;
    %assign/vec4 v0x5bfab6394290_0, 0;
    %pushi/vec4 0, 0, 1;
    %assign/vec4 v0x5bfab6394350_0, 0;
    %jmp T_3.1;
T_3.0 ;
    %load/vec4 v0x5bfab6394710_0;
    %assign/vec4 v0x5bfab63941d0_0, 0;
    %load/vec4 v0x5bfab63941d0_0;
    %assign/vec4 v0x5bfab6394290_0, 0;
    %load/vec4 v0x5bfab6394290_0;
    %assign/vec4 v0x5bfab6394350_0, 0;
T_3.1 ;
    %jmp T_3;
    .thread T_3;
    .scope S_0x5bfab6326990;
T_4 ;
    %wait E_0x5bfab63487f0;
    %load/vec4 v0x5bfab6394110_0;
    %nor/r;
    %flag_set/vec4 8;
    %jmp/0xz  T_4.0, 8;
    %pushi/vec4 0, 0, 16;
    %assign/vec4 v0x5bfab63947d0_0, 0;
    %pushi/vec4 0, 0, 12;
    %assign/vec4 v0x5bfab6393990_0, 0;
    %pushi/vec4 0, 0, 12;
    %assign/vec4 v0x5bfab6394b10_0, 0;
    %pushi/vec4 0, 0, 12;
    %assign/vec4 v0x5bfab6393a70_0, 0;
    %pushi/vec4 0, 0, 12;
    %assign/vec4 v0x5bfab6393730_0, 0;
    %pushi/vec4 0, 0, 16;
    %assign/vec4 v0x5bfab6393f50_0, 0;
    %jmp T_4.1;
T_4.0 ;
    %load/vec4 v0x5bfab6393330_0;
    %assign/vec4 v0x5bfab6393a70_0, 0;
    %load/vec4 v0x5bfab6393650_0;
    %assign/vec4 v0x5bfab6393730_0, 0;
    %load/vec4 v0x5bfab6393d10_0;
    %ix/load 5, 0, 0;
    %ix/load 4, 0, 0;
    %flag_set/imm 4, 0;
    %assign/vec4/off/d v0x5bfab6394b10_0, 4, 5;
    %load/vec4 v0x5bfab6393590_0;
    %ix/load 5, 0, 0;
    %ix/load 4, 1, 0;
    %flag_set/imm 4, 0;
    %assign/vec4/off/d v0x5bfab6394b10_0, 4, 5;
    %load/vec4 v0x5bfab6394bf0_0;
    %ix/load 5, 0, 0;
    %ix/load 4, 2, 0;
    %flag_set/imm 4, 0;
    %assign/vec4/off/d v0x5bfab6394b10_0, 4, 5;
    %pushi/vec4 0, 0, 5;
    %ix/load 5, 0, 0;
    %ix/load 4, 3, 0;
    %flag_set/imm 4, 0;
    %assign/vec4/off/d v0x5bfab6394b10_0, 4, 5;
    %pushi/vec4 1, 0, 4;
    %ix/load 5, 0, 0;
    %ix/load 4, 8, 0;
    %flag_set/imm 4, 0;
    %assign/vec4/off/d v0x5bfab6394b10_0, 4, 5;
    %load/vec4 v0x5bfab6394a30_0;
    %cmpi/e 1, 0, 2;
    %flag_get/vec4 4;
    %jmp/0 T_4.4, 4;
    %load/vec4 v0x5bfab6394410_0;
    %and;
T_4.4;
    %flag_set/vec4 8;
    %jmp/0xz  T_4.2, 8;
    %load/vec4 v0x5bfab63947d0_0;
    %parti/s 15, 0, 2;
    %load/vec4 v0x5bfab6394650_0;
    %concat/vec4; draw_concat_vec4
    %assign/vec4 v0x5bfab63947d0_0, 0;
T_4.2 ;
    %load/vec4 v0x5bfab6394a30_0;
    %cmpi/e 2, 0, 2;
    %jmp/0xz  T_4.5, 4;
    %load/vec4 v0x5bfab6393b50_0;
    %cmpi/e 0, 0, 2;
    %jmp/0xz  T_4.7, 4;
    %load/vec4 v0x5bfab6393c30_0;
    %dup/vec4;
    %pushi/vec4 1, 0, 2;
    %cmp/u;
    %jmp/1 T_4.9, 6;
    %dup/vec4;
    %pushi/vec4 2, 0, 2;
    %cmp/u;
    %jmp/1 T_4.10, 6;
    %dup/vec4;
    %pushi/vec4 3, 0, 2;
    %cmp/u;
    %jmp/1 T_4.11, 6;
    %jmp T_4.13;
T_4.9 ;
    %load/vec4 v0x5bfab63947d0_0;
    %parti/s 12, 0, 2;
    %assign/vec4 v0x5bfab6393990_0, 0;
    %jmp T_4.13;
T_4.10 ;
    %load/vec4 v0x5bfab6393990_0;
    %load/vec4 v0x5bfab63947d0_0;
    %parti/s 12, 0, 2;
    %or;
    %assign/vec4 v0x5bfab6393990_0, 0;
    %jmp T_4.13;
T_4.11 ;
    %load/vec4 v0x5bfab6393990_0;
    %load/vec4 v0x5bfab63947d0_0;
    %parti/s 12, 0, 2;
    %inv;
    %and;
    %assign/vec4 v0x5bfab6393990_0, 0;
    %jmp T_4.13;
T_4.13 ;
    %pop/vec4 1;
T_4.7 ;
    %load/vec4 v0x5bfab6393c30_0;
    %cmpi/e 0, 0, 2;
    %jmp/0xz  T_4.14, 4;
    %load/vec4 v0x5bfab6393b50_0;
    %dup/vec4;
    %pushi/vec4 0, 0, 2;
    %cmp/u;
    %jmp/1 T_4.16, 6;
    %dup/vec4;
    %pushi/vec4 1, 0, 2;
    %cmp/u;
    %jmp/1 T_4.17, 6;
    %dup/vec4;
    %pushi/vec4 2, 0, 2;
    %cmp/u;
    %jmp/1 T_4.18, 6;
    %dup/vec4;
    %pushi/vec4 3, 0, 2;
    %cmp/u;
    %jmp/1 T_4.19, 6;
    %pushi/vec4 57005, 0, 16;
    %assign/vec4 v0x5bfab6393f50_0, 0;
    %jmp T_4.21;
T_4.16 ;
    %pushi/vec4 0, 0, 4;
    %load/vec4 v0x5bfab6393990_0;
    %concat/vec4; draw_concat_vec4
    %assign/vec4 v0x5bfab6393f50_0, 0;
    %jmp T_4.21;
T_4.17 ;
    %pushi/vec4 0, 0, 4;
    %load/vec4 v0x5bfab6394b10_0;
    %concat/vec4; draw_concat_vec4
    %assign/vec4 v0x5bfab6393f50_0, 0;
    %jmp T_4.21;
T_4.18 ;
    %pushi/vec4 0, 0, 4;
    %load/vec4 v0x5bfab6393a70_0;
    %concat/vec4; draw_concat_vec4
    %assign/vec4 v0x5bfab6393f50_0, 0;
    %jmp T_4.21;
T_4.19 ;
    %pushi/vec4 0, 0, 4;
    %load/vec4 v0x5bfab6393730_0;
    %concat/vec4; draw_concat_vec4
    %assign/vec4 v0x5bfab6393f50_0, 0;
    %jmp T_4.21;
T_4.21 ;
    %pop/vec4 1;
T_4.14 ;
T_4.5 ;
T_4.1 ;
    %jmp T_4;
    .thread T_4;
    .scope S_0x5bfab6326990;
T_5 ;
    %wait E_0x5bfab6345940;
    %load/vec4 v0x5bfab6394110_0;
    %nor/r;
    %flag_set/vec4 8;
    %jmp/0xz  T_5.0, 8;
    %pushi/vec4 0, 0, 1;
    %assign/vec4 v0x5bfab6393e90_0, 0;
    %jmp T_5.1;
T_5.0 ;
    %load/vec4 v0x5bfab63944d0_0;
    %pad/u 32;
    %cmpi/e 0, 0, 32;
    %jmp/0xz  T_5.2, 4;
    %load/vec4 v0x5bfab6393f50_0;
    %parti/s 1, 15, 5;
    %assign/vec4 v0x5bfab6393e90_0, 0;
    %load/vec4 v0x5bfab6393f50_0;
    %parti/s 15, 0, 2;
    %concati/vec4 0, 0, 1;
    %assign/vec4 v0x5bfab6393f50_0, 0;
T_5.2 ;
T_5.1 ;
    %jmp T_5;
    .thread T_5;
    .scope S_0x5bfab6327270;
T_6 ;
    %pushi/vec4 0, 0, 1;
    %store/vec4 v0x5bfab6395c70_0, 0, 1;
T_6.0 ;
    %delay 5000, 0;
    %load/vec4 v0x5bfab6395c70_0;
    %inv;
    %store/vec4 v0x5bfab6395c70_0, 0, 1;
    %jmp T_6.0;
T_6.1 ;
    %end;
    .thread T_6;
    .scope S_0x5bfab6327270;
T_7 ;
    %pushi/vec4 0, 0, 1;
    %store/vec4 v0x5bfab6396430_0, 0, 1;
T_7.0 ;
    %delay 50000, 0;
    %load/vec4 v0x5bfab6396430_0;
    %inv;
    %store/vec4 v0x5bfab6396430_0, 0, 1;
    %jmp T_7.0;
T_7.1 ;
    %end;
    .thread T_7;
    .scope S_0x5bfab6327270;
T_8 ;
    %vpi_call 2 71 "$dumpfile", "tb_spi_controller.vcd" {0 0 0};
    %vpi_call 2 72 "$dumpvars", 32'sb00000000000000000000000000000000, S_0x5bfab6327270 {0 0 0};
    %end;
    .thread T_8;
    .scope S_0x5bfab6327270;
T_9 ;
    %vpi_call 2 104 "$display", "\012PHASE 1: SANITY AND INITIALIZATION TESTS" {0 0 0};
    %pushi/vec4 1, 0, 1;
    %store/vec4 v0x5bfab63961c0_0, 0, 1;
    %pushi/vec4 1, 0, 1;
    %store/vec4 v0x5bfab63960f0_0, 0, 1;
    %pushi/vec4 0, 0, 12;
    %store/vec4 v0x5bfab63958b0_0, 0, 12;
    %pushi/vec4 0, 0, 12;
    %store/vec4 v0x5bfab6395ba0_0, 0, 12;
    %pushi/vec4 0, 0, 1;
    %store/vec4 v0x5bfab6395eb0_0, 0, 1;
    %pushi/vec4 0, 0, 1;
    %store/vec4 v0x5bfab6395ab0_0, 0, 1;
    %pushi/vec4 0, 0, 1;
    %store/vec4 v0x5bfab63966a0_0, 0, 1;
    %vpi_call 2 108 "$display", "  [1.1] Applying reset..." {0 0 0};
    %pushi/vec4 0, 0, 1;
    %store/vec4 v0x5bfab63960f0_0, 0, 1;
    %delay 50000, 0;
    %pushi/vec4 1, 0, 1;
    %store/vec4 v0x5bfab63960f0_0, 0, 1;
    %delay 50000, 0;
    %load/vec4 v0x5bfab6395e10_0;
    %cmpi/e 0, 0, 12;
    %jmp/0xz  T_9.0, 6;
    %vpi_call 2 114 "$display", "  [1.1] SUCCESS: Control outputs are zero after reset." {0 0 0};
    %jmp T_9.1;
T_9.0 ;
    %vpi_call 2 116 "$display", "  [1.1] FAILED: Control outputs are not zero after reset." {0 0 0};
T_9.1 ;
    %vpi_call 2 118 "$display", "  [1.2] Reading STATUS_INFO_REG to check link..." {0 0 0};
    %pushi/vec4 0, 0, 2;
    %store/vec4 v0x5bfab6395240_0, 0, 2;
    %pushi/vec4 1, 0, 2;
    %store/vec4 v0x5bfab632ad90_0, 0, 2;
    %pushi/vec4 0, 0, 12;
    %store/vec4 v0x5bfab63956d0_0, 0, 12;
    %fork TD_tb_spi_controller.spi_transaction, S_0x5bfab6395050;
    %join;
    %load/vec4 v0x5bfab63954c0_0;
    %store/vec4 v0x5bfab6396050_0, 0, 12;
    %load/vec4 v0x5bfab6396050_0;
    %cmpi/e 256, 0, 12;
    %jmp/0xz  T_9.2, 6;
    %vpi_call 2 121 "$display", "  [1.2] SUCCESS: Read back expected default value." {0 0 0};
    %jmp T_9.3;
T_9.2 ;
    %vpi_call 2 123 "$display", "  [1.2] FAILED: Read back unexpected value %h.", v0x5bfab6396050_0 {0 0 0};
T_9.3 ;
    %vpi_call 2 128 "$display", "\012PHASE 2: CORE FUNCTIONALITY TESTS" {0 0 0};
    %vpi_call 2 129 "$display", "  [2.1] Testing WRITE to CTRL_REG..." {0 0 0};
    %pushi/vec4 1, 0, 2;
    %store/vec4 v0x5bfab6395240_0, 0, 2;
    %pushi/vec4 0, 0, 2;
    %store/vec4 v0x5bfab632ad90_0, 0, 2;
    %pushi/vec4 1445, 0, 12;
    %store/vec4 v0x5bfab63956d0_0, 0, 12;
    %fork TD_tb_spi_controller.spi_transaction, S_0x5bfab6395050;
    %join;
    %load/vec4 v0x5bfab63954c0_0;
    %store/vec4 v0x5bfab6396050_0, 0, 12;
    %delay 20000, 0;
    %load/vec4 v0x5bfab6395e10_0;
    %cmpi/e 1445, 0, 12;
    %jmp/0xz  T_9.4, 6;
    %vpi_call 2 133 "$display", "  [2.1] SUCCESS: Control outputs updated correctly after WRITE." {0 0 0};
    %jmp T_9.5;
T_9.4 ;
    %vpi_call 2 135 "$display", "  [2.1] FAILED: Control outputs incorrect. Expected 5A5, got %h", v0x5bfab6395e10_0 {0 0 0};
T_9.5 ;
    %vpi_call 2 137 "$display", "  [2.1] Testing READ from CTRL_REG..." {0 0 0};
    %pushi/vec4 0, 0, 2;
    %store/vec4 v0x5bfab6395240_0, 0, 2;
    %pushi/vec4 0, 0, 2;
    %store/vec4 v0x5bfab632ad90_0, 0, 2;
    %pushi/vec4 0, 0, 12;
    %store/vec4 v0x5bfab63956d0_0, 0, 12;
    %fork TD_tb_spi_controller.spi_transaction, S_0x5bfab6395050;
    %join;
    %load/vec4 v0x5bfab63954c0_0;
    %store/vec4 v0x5bfab6396050_0, 0, 12;
    %load/vec4 v0x5bfab6396050_0;
    %cmpi/e 1445, 0, 12;
    %jmp/0xz  T_9.6, 6;
    %vpi_call 2 140 "$display", "  [2.1] SUCCESS: Read back correct data from CTRL_REG." {0 0 0};
    %jmp T_9.7;
T_9.6 ;
    %vpi_call 2 142 "$display", "  [2.1] FAILED: Read back incorrect data. Expected 5A5, got %h", v0x5bfab6396050_0 {0 0 0};
T_9.7 ;
    %vpi_call 2 144 "$display", "  [2.2] Testing SET MASK..." {0 0 0};
    %pushi/vec4 2, 0, 2;
    %store/vec4 v0x5bfab6395240_0, 0, 2;
    %pushi/vec4 0, 0, 2;
    %store/vec4 v0x5bfab632ad90_0, 0, 2;
    %pushi/vec4 2570, 0, 12;
    %store/vec4 v0x5bfab63956d0_0, 0, 12;
    %fork TD_tb_spi_controller.spi_transaction, S_0x5bfab6395050;
    %join;
    %load/vec4 v0x5bfab63954c0_0;
    %store/vec4 v0x5bfab6396050_0, 0, 12;
    %delay 20000, 0;
    %load/vec4 v0x5bfab6395e10_0;
    %cmpi/e 4015, 0, 12;
    %jmp/0xz  T_9.8, 6;
    %vpi_call 2 148 "$display", "  [2.2] SUCCESS: SET MASK worked correctly." {0 0 0};
    %jmp T_9.9;
T_9.8 ;
    %vpi_call 2 150 "$display", "  [2.2] FAILED: SET MASK result incorrect. Expected FAF, got %h", v0x5bfab6395e10_0 {0 0 0};
T_9.9 ;
    %vpi_call 2 152 "$display", "  [2.3] Testing CLEAR MASK..." {0 0 0};
    %pushi/vec4 3, 0, 2;
    %store/vec4 v0x5bfab6395240_0, 0, 2;
    %pushi/vec4 0, 0, 2;
    %store/vec4 v0x5bfab632ad90_0, 0, 2;
    %pushi/vec4 3855, 0, 12;
    %store/vec4 v0x5bfab63956d0_0, 0, 12;
    %fork TD_tb_spi_controller.spi_transaction, S_0x5bfab6395050;
    %join;
    %load/vec4 v0x5bfab63954c0_0;
    %store/vec4 v0x5bfab6396050_0, 0, 12;
    %delay 20000, 0;
    %load/vec4 v0x5bfab6395e10_0;
    %cmpi/e 160, 0, 12;
    %jmp/0xz  T_9.10, 6;
    %vpi_call 2 156 "$display", "  [2.3] SUCCESS: CLEAR MASK worked correctly." {0 0 0};
    %jmp T_9.11;
T_9.10 ;
    %vpi_call 2 158 "$display", "  [2.3] FAILED: CLEAR MASK result incorrect. Expected 0A0, got %h", v0x5bfab6395e10_0 {0 0 0};
T_9.11 ;
    %vpi_call 2 160 "$display", "  [2.4] Testing MISO Tristate..." {0 0 0};
    %load/vec4 v0x5bfab6396290_0;
    %cmpi/e 0, 1, 1;
    %jmp/0xz  T_9.12, 6;
    %vpi_call 2 162 "$display", "  [2.4] SUCCESS: MISO is high-impedance when CS is high." {0 0 0};
    %jmp T_9.13;
T_9.12 ;
    %vpi_call 2 164 "$display", "  [2.4] FAILED: MISO is not high-impedance when CS is high." {0 0 0};
T_9.13 ;
    %vpi_call 2 169 "$display", "\012PHASE 3: BOUNDARY AND EDGE CASE TESTS" {0 0 0};
    %vpi_call 2 170 "$display", "  [3.1] Testing back-to-back transactions..." {0 0 0};
    %pushi/vec4 1, 0, 2;
    %store/vec4 v0x5bfab6395240_0, 0, 2;
    %pushi/vec4 0, 0, 2;
    %store/vec4 v0x5bfab632ad90_0, 0, 2;
    %pushi/vec4 3132, 0, 12;
    %store/vec4 v0x5bfab63956d0_0, 0, 12;
    %fork TD_tb_spi_controller.spi_transaction, S_0x5bfab6395050;
    %join;
    %load/vec4 v0x5bfab63954c0_0;
    %store/vec4 v0x5bfab6396050_0, 0, 12;
    %delay 10000, 0;
    %pushi/vec4 0, 0, 2;
    %store/vec4 v0x5bfab6395240_0, 0, 2;
    %pushi/vec4 0, 0, 2;
    %store/vec4 v0x5bfab632ad90_0, 0, 2;
    %pushi/vec4 0, 0, 12;
    %store/vec4 v0x5bfab63956d0_0, 0, 12;
    %fork TD_tb_spi_controller.spi_transaction, S_0x5bfab6395050;
    %join;
    %load/vec4 v0x5bfab63954c0_0;
    %store/vec4 v0x5bfab6396050_0, 0, 12;
    %load/vec4 v0x5bfab6396050_0;
    %cmpi/e 3132, 0, 12;
    %jmp/0xz  T_9.14, 6;
    %vpi_call 2 175 "$display", "  [3.1] SUCCESS: Back-to-back write/read sequence passed." {0 0 0};
    %jmp T_9.15;
T_9.14 ;
    %vpi_call 2 177 "$display", "  [3.1] FAILED: Back-to-back sequence failed. Read %h", v0x5bfab6396050_0 {0 0 0};
T_9.15 ;
    %vpi_call 2 179 "$display", "  [3.2] Testing long delay between transactions..." {0 0 0};
    %pushi/vec4 1, 0, 2;
    %store/vec4 v0x5bfab6395240_0, 0, 2;
    %pushi/vec4 0, 0, 2;
    %store/vec4 v0x5bfab632ad90_0, 0, 2;
    %pushi/vec4 3054, 0, 12;
    %store/vec4 v0x5bfab63956d0_0, 0, 12;
    %fork TD_tb_spi_controller.spi_transaction, S_0x5bfab6395050;
    %join;
    %load/vec4 v0x5bfab63954c0_0;
    %store/vec4 v0x5bfab6396050_0, 0, 12;
    %delay 50000000, 0;
    %pushi/vec4 0, 0, 2;
    %store/vec4 v0x5bfab6395240_0, 0, 2;
    %pushi/vec4 0, 0, 2;
    %store/vec4 v0x5bfab632ad90_0, 0, 2;
    %pushi/vec4 0, 0, 12;
    %store/vec4 v0x5bfab63956d0_0, 0, 12;
    %fork TD_tb_spi_controller.spi_transaction, S_0x5bfab6395050;
    %join;
    %load/vec4 v0x5bfab63954c0_0;
    %store/vec4 v0x5bfab6396050_0, 0, 12;
    %load/vec4 v0x5bfab6396050_0;
    %cmpi/e 3054, 0, 12;
    %jmp/0xz  T_9.16, 6;
    %vpi_call 2 184 "$display", "  [3.2] SUCCESS: Controller state maintained after long delay." {0 0 0};
    %jmp T_9.17;
T_9.16 ;
    %vpi_call 2 186 "$display", "  [3.2] FAILED: Controller state lost after long delay. Read %h", v0x5bfab6396050_0 {0 0 0};
T_9.17 ;
    %vpi_call 2 188 "$display", "  [3.3] NOTE: Clock frequency tests are performed by changing" {0 0 0};
    %vpi_call 2 189 "$display", "        localparam SPI_CLK_PERIOD and re-running the simulation." {0 0 0};
    %vpi_call 2 194 "$display", "\012PHASE 4: ERROR AND RECOVERY TESTS" {0 0 0};
    %vpi_call 2 195 "$display", "  [4.1] Testing aborted transaction..." {0 0 0};
    %pushi/vec4 0, 0, 1;
    %store/vec4 v0x5bfab63961c0_0, 0, 1;
    %delay 850000, 0;
    %pushi/vec4 1, 0, 1;
    %store/vec4 v0x5bfab63961c0_0, 0, 1;
    %delay 100000, 0;
    %vpi_call 2 200 "$display", "  [4.1] Sending new valid command after abort..." {0 0 0};
    %pushi/vec4 1, 0, 2;
    %store/vec4 v0x5bfab6395240_0, 0, 2;
    %pushi/vec4 0, 0, 2;
    %store/vec4 v0x5bfab632ad90_0, 0, 2;
    %pushi/vec4 4095, 0, 12;
    %store/vec4 v0x5bfab63956d0_0, 0, 12;
    %fork TD_tb_spi_controller.spi_transaction, S_0x5bfab6395050;
    %join;
    %load/vec4 v0x5bfab63954c0_0;
    %store/vec4 v0x5bfab6396050_0, 0, 12;
    %delay 20000, 0;
    %load/vec4 v0x5bfab6395e10_0;
    %cmpi/e 4095, 0, 12;
    %jmp/0xz  T_9.18, 6;
    %vpi_call 2 204 "$display", "  [4.1] SUCCESS: Controller recovered and processed new command." {0 0 0};
    %jmp T_9.19;
T_9.18 ;
    %vpi_call 2 206 "$display", "  [4.1] FAILED: Controller did not recover from aborted transaction." {0 0 0};
T_9.19 ;
    %vpi_call 2 208 "$display", "  [4.2] Testing WRITE to a read-only register..." {0 0 0};
    %pushi/vec4 1, 0, 2;
    %store/vec4 v0x5bfab6395240_0, 0, 2;
    %pushi/vec4 2, 0, 2;
    %store/vec4 v0x5bfab632ad90_0, 0, 2;
    %pushi/vec4 2989, 0, 12;
    %store/vec4 v0x5bfab63956d0_0, 0, 12;
    %fork TD_tb_spi_controller.spi_transaction, S_0x5bfab6395050;
    %join;
    %load/vec4 v0x5bfab63954c0_0;
    %store/vec4 v0x5bfab6396050_0, 0, 12;
    %pushi/vec4 0, 0, 2;
    %store/vec4 v0x5bfab6395240_0, 0, 2;
    %pushi/vec4 2, 0, 2;
    %store/vec4 v0x5bfab632ad90_0, 0, 2;
    %pushi/vec4 0, 0, 12;
    %store/vec4 v0x5bfab63956d0_0, 0, 12;
    %fork TD_tb_spi_controller.spi_transaction, S_0x5bfab6395050;
    %join;
    %load/vec4 v0x5bfab63954c0_0;
    %store/vec4 v0x5bfab6396050_0, 0, 12;
    %load/vec4 v0x5bfab6396050_0;
    %cmpi/ne 2989, 0, 12;
    %jmp/0xz  T_9.20, 6;
    %vpi_call 2 212 "$display", "  [4.2] SUCCESS: Write to read-only register was ignored." {0 0 0};
    %jmp T_9.21;
T_9.20 ;
    %vpi_call 2 214 "$display", "  [4.2] FAILED: Read-only register was incorrectly written to." {0 0 0};
T_9.21 ;
    %vpi_call 2 216 "$display", "\012TESTBENCH: All tests finished." {0 0 0};
    %vpi_call 2 217 "$finish" {0 0 0};
    %end;
    .thread T_9;
# The file index is used to find the file name in the following table.
:file_names 4;
    "N/A";
    "<interactive>";
    "tb_spi_controller.v";
    "spi_controller.v";
